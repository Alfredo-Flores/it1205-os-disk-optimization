<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
	<link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.4.3.min.css">

	<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
	<script src="http://cdn.oesmith.co.uk/morris-0.4.1.min.js"></script>
	<script type="text/javascript">
	function fcfs(current_cylinder_int, input_sequence_int_arr){
		return input_sequence_int_arr;
	}

	function sstf(current_cylinder_int, input_sequence_int_arr){
		var sstf_arr = new Array();
		for( var i = 0; i < input_sequence_int_arr.length; i++){
			sstf_arr.push(input_sequence_int_arr[i]);
		}

		var ii = -1;
		for ( var i = 0; i< input_sequence_int_arr.length; i++) {
			var minimum = Number.MAX_VALUE;
			ii = i;
			for( var j = i; j < input_sequence_int_arr.length; j++){
				var distance = Math.abs(current_cylinder_int - sstf_arr[j]);
				if(distance < minimum){
					ii = j
					minimum = distance;
				}
			}

			var tmp = sstf_arr[i];
			sstf_arr[i] = sstf_arr[ii];
			sstf_arr[ii] = tmp;
			current_cylinder_int = sstf_arr[i];
		}
		return sstf_arr;
	}

	function scan(previous_cylinder_int, current_cylinder_int, input_sequence_int_arr){
		var scan_arr = new Array();
		for( var i = 0; i < input_sequence_int_arr.length; i++){
			scan_arr.push(input_sequence_int_arr[i]);
		}

		if((previous_cylinder_int - current_cylinder_int)<0){ // Increasing
			scan_arr.sort(function(a, b){return a-b});
			scan_arr.push(4999);
		}else if((previous_cylinder_int - current_cylinder_int)>0){ // Decreasing
			scan_arr.sort(function(a, b){return b-a});
			scan_arr.push(0);
		}else{ // Same location
			return false;
		}

		current_cylinder_int_index = scan_arr.indexOf(current_cylinder_int);

		scan_spliced_arr = scan_arr.splice(0, current_cylinder_int_index);

		scan_spliced_arr.reverse();

		scan_arr = scan_arr.concat(scan_spliced_arr);

		return scan_arr;
	}

	function look(previous_cylinder_int, current_cylinder_int, input_sequence_int_arr){
		var look_arr = new Array();
		for( var i = 0; i < input_sequence_int_arr.length; i++){
			look_arr.push(input_sequence_int_arr[i]);
		}

		if((previous_cylinder_int - current_cylinder_int)<0){ // Increasing
			look_arr.sort(function(a, b){return a-b});
		}else if((previous_cylinder_int - current_cylinder_int)>0){ // Decreasing
			look_arr.sort(function(a, b){return b-a});
		}else{ // Same location
			return false;
		}

		current_cylinder_int_index = look_arr.indexOf(current_cylinder_int);

		look_spliced_arr = look_arr.splice(0, current_cylinder_int_index);

		look_spliced_arr.reverse();

		look_arr = look_arr.concat(look_spliced_arr);

		return look_arr;
	}

	function cscan(previous_cylinder_int, current_cylinder_int, input_sequence_int_arr){
		var cscan_arr = new Array();
		for( var i = 0; i < input_sequence_int_arr.length; i++){
			cscan_arr.push(input_sequence_int_arr[i]);
		}

		if((previous_cylinder_int - current_cylinder_int)<0){ // Increasing
			cscan_arr.sort(function(a, b){return a-b});
			cscan_arr.push(4999);
		}else if((previous_cylinder_int - current_cylinder_int)>0){ // Decreasing
			cscan_arr.sort(function(a, b){return b-a});
			cscan_arr.push(0);
		}else{ // Same location
			return false;
		}

		current_cylinder_int_index = cscan_arr.indexOf(current_cylinder_int);

		cscan_spliced_arr = cscan_arr.splice(0, current_cylinder_int_index);

		cscan_arr = cscan_arr.concat(cscan_spliced_arr);

		return cscan_arr;
	}

	function clook(previous_cylinder_int, current_cylinder_int, input_sequence_int_arr){
		var clook_arr = new Array();
		for( var i = 0; i < input_sequence_int_arr.length; i++){
			clook_arr.push(input_sequence_int_arr[i]);
		}

		if((previous_cylinder_int - current_cylinder_int)<0){ // Increasing
			clook_arr.sort(function(a, b){return a-b});
		}else if((previous_cylinder_int - current_cylinder_int)>0){ // Decreasing
			clook_arr.sort(function(a, b){return b-a});
		}else{ // Same location
			return false;
		}

		current_cylinder_int_index = clook_arr.indexOf(current_cylinder_int);

		clook_spliced_arr = clook_arr.splice(0, current_cylinder_int_index);

		clook_arr = clook_arr.concat(clook_spliced_arr);

		return clook_arr;
	}

	function total_distance(arr){
		var total_distance = 0;

		for(var i=0; i<arr.length; i++){
			if(arr[i+1] == null) break;

			total_distance += Math.abs(arr[i]-arr[i+1]);
		}

		return total_distance;
	}

	function refresh(){
		var previous_cylinder_str = $('#previous-cylinder').val();
		var previous_cylinder_int = parseInt(previous_cylinder_str);
		var current_cylinder_str = $('#current-cylinder').val();
		var current_cylinder_int = parseInt(current_cylinder_str);
		var input_sequence_str = $('#input-sequence').val();
		var input_sequence_str_arr = input_sequence_str.split(',');
		var input_sequence_int_arr = new Array();

		input_sequence_int_arr.push(current_cylinder_int);

		for(var i = 0; i<input_sequence_str_arr.length; i++){
			input_sequence_int_arr.push(parseInt(input_sequence_str_arr[i]));
		}

		fcfs_sequence_arr = fcfs(current_cylinder_int, input_sequence_int_arr);
		sstf_sequence_arr = sstf(current_cylinder_int, input_sequence_int_arr);
		scan_sequence_arr = scan(previous_cylinder_int, current_cylinder_int, input_sequence_int_arr);
		look_sequence_arr = look(previous_cylinder_int, current_cylinder_int, input_sequence_int_arr);
		cscan_sequence_arr = cscan(previous_cylinder_int, current_cylinder_int, input_sequence_int_arr);
		clook_sequence_arr = clook(previous_cylinder_int, current_cylinder_int, input_sequence_int_arr);

		$('#fcfs-sequence').text(fcfs_sequence_arr.join(' => ') + ' (Total distance is ' + total_distance(fcfs_sequence_arr) + ')');
		$('#sstf-sequence').text(sstf_sequence_arr.join(' => ') + ' (Total distance is ' + total_distance(sstf_sequence_arr) + ')');
		$('#scan-sequence').text(scan_sequence_arr.join(' => ') + ' (Total distance is ' + total_distance(scan_sequence_arr) + ')');
		$('#look-sequence').text(look_sequence_arr.join(' => ') + ' (Total distance is ' + total_distance(look_sequence_arr) + ')');
		$('#cscan-sequence').text(cscan_sequence_arr.join(' => '));
		$('#clook-sequence').text(clook_sequence_arr.join(' => '));

		$('#chart').empty();

	  	Morris.Line({
		  element: 'chart',
		  data: [
		    { x: '1', fcfs: fcfs_sequence_arr[0], sstf: sstf_sequence_arr[0], scan: scan_sequence_arr[0], look: look_sequence_arr[0], cscan: cscan_sequence_arr[0], clook: clook_sequence_arr[0] },
		    { x: '2', fcfs: fcfs_sequence_arr[1],  sstf: sstf_sequence_arr[1], scan: scan_sequence_arr[1], look: look_sequence_arr[1], cscan: cscan_sequence_arr[1], clook: clook_sequence_arr[1] },
		    { x: '3', fcfs: fcfs_sequence_arr[2],  sstf: sstf_sequence_arr[2], scan: scan_sequence_arr[2], look: look_sequence_arr[2], cscan: cscan_sequence_arr[2], clook: clook_sequence_arr[2] },
		    { x: '4', fcfs: fcfs_sequence_arr[3],  sstf: sstf_sequence_arr[3], scan: scan_sequence_arr[3], look: look_sequence_arr[3], cscan: cscan_sequence_arr[3], clook: clook_sequence_arr[3] },
		    { x: '5', fcfs: fcfs_sequence_arr[4],  sstf: sstf_sequence_arr[4], scan: scan_sequence_arr[4], look: look_sequence_arr[4], cscan: cscan_sequence_arr[4], clook: clook_sequence_arr[4] },
		    { x: '6', fcfs: fcfs_sequence_arr[5],  sstf: sstf_sequence_arr[5], scan: scan_sequence_arr[5], look: look_sequence_arr[5], cscan: cscan_sequence_arr[5], clook: clook_sequence_arr[5] },
		    { x: '7', fcfs: fcfs_sequence_arr[6], sstf: sstf_sequence_arr[6], scan: scan_sequence_arr[6], look: look_sequence_arr[6], cscan: cscan_sequence_arr[6], clook: clook_sequence_arr[6] },
		    { x: '8', fcfs: fcfs_sequence_arr[7], sstf: sstf_sequence_arr[7], scan: scan_sequence_arr[7], look: look_sequence_arr[7], cscan: cscan_sequence_arr[7], clook: clook_sequence_arr[7] },
		    { x: '9', fcfs: fcfs_sequence_arr[8], sstf: sstf_sequence_arr[8], scan: scan_sequence_arr[8], look: look_sequence_arr[8], cscan: cscan_sequence_arr[8], clook: clook_sequence_arr[8] },
		    { x: '10', fcfs: fcfs_sequence_arr[9], sstf: sstf_sequence_arr[9], scan: scan_sequence_arr[9], look: look_sequence_arr[9], cscan: cscan_sequence_arr[9], clook: clook_sequence_arr[9] },
		    { x: '11', fcfs: fcfs_sequence_arr[10], sstf: sstf_sequence_arr[10], scan: scan_sequence_arr[10], look: look_sequence_arr[10], cscan: cscan_sequence_arr[10], clook: clook_sequence_arr[10] },
		  ],
		  xkey: 'x',
		  parseTime: false,
		  ykeys: ['fcfs', 'sstf', 'scan', 'look', 'cscan', 'clook'],
		  ymax: 5000,
		  ymin: 0,
		  labels: ['FCFS', 'SSTF', 'SCAN', 'LOOK', 'CSCAN', 'CLOOK']
		});
	}

	$(document).ready(function(){
		refresh();

		$('#previous-cylinder').on('keyup', function(e){
			refresh();
		});

		$('#current-cylinder').on('keyup', function(e){
			refresh();
		});

		$('#input-sequence').on('keyup', function(e){
			refresh();
		});
	});
	</script>
	<meta charset=utf-8 />
	<title>IT1205 Assignment</title>
</head>
<body>
  <body>

    <!-- Wrap all page content here -->
    <div id="wrap">

      <!-- Begin page content -->
      <div class="container">
        <div class="page-header">
          <h1>IT1205 Assignment</h1>
        </div>
        <div class="row">
        	<div class="col-lg-12">
        		<h3>Graphical Chart Representation</h3>
        		<div id="chart"></div>
        		<h3>Sequence Data</h3>
        		<form class="form-horizontal" role="form">
        			<div class="form-group">
					  <label for="previous-cylinder" class="col-sm-3 control-label">Previous Cylinder</label>
					  <div class="col-sm-9">
					    <input type="text" class="form-control" id="previous-cylinder" value="1500">
					  </div>
					</div>
					<div class="form-group">
					  <label for="current-cylinder" class="col-sm-3 control-label">Current Cylinder</label>
					  <div class="col-sm-9">
					    <input type="text" class="form-control" id="current-cylinder" value="857">
					  </div>
					</div>
					<div class="form-group">
					  <label for="input-sequence" class="col-sm-3 control-label">Input Sequence</label>
					  <div class="col-sm-9">
					    <input type="text" class="form-control" id="input-sequence" value="751,4505,757,3506,4758,2200,351,22,1058">
					  </div>
					</div>
					<div class="form-group">
					  <label class="col-sm-3 control-label">FCFS Sequence</label>
					  <div class="col-sm-9">
					    <p id="fcfs-sequence" class="form-control" style="border:none;box-shadow:none;"></p>
					  </div>	 
					</div>
					<div class="form-group">
					  <label class="col-sm-3 control-label">SSTF Sequence</label>					 
					  <div class="col-sm-9">
					    <p id="sstf-sequence" class="form-control" style="border:none;box-shadow:none;"></p>
					  </div>	
					</div>
					<div class="form-group">
					  <label class="col-sm-3 control-label">SCAN Sequence</label>					 
					  <div class="col-sm-9">
					    <p id="scan-sequence" class="form-control" style="border:none;box-shadow:none;"></p>
					  </div>	
					</div>
					<div class="form-group">
					  <label class="col-sm-3 control-label">LOOK Sequence</label>					 
					  <div class="col-sm-9">
					    <p id="look-sequence" class="form-control" style="border:none;box-shadow:none;"></p>
					  </div>	
					</div>
					<div class="form-group">
					  <label class="col-sm-3 control-label">CSCAN Sequence</label>					 
					  <div class="col-sm-9">
					    <p id="cscan-sequence" class="form-control" style="border:none;box-shadow:none;"></p>
					  </div>	
					</div>
					<div class="form-group">
					  <label class="col-sm-3 control-label">CLOOK Sequence</label>					 
					  <div class="col-sm-9">
					    <p id="clook-sequence" class="form-control" style="border:none;box-shadow:none;"></p>
					  </div>	
					</div>
				</form>
        	</div>
        </div>
      </div>
    </div>

  </body>
</body>
</html>
  